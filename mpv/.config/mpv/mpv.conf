# window
# autofit scales to fit dimension while preserving video aspect ratio
# geometry positions window without affecting size
autofit=400  # scale to fit 400px on longest side, maintaining aspect ratio
geometry=-0-0  # position at bottom-right corner
screen=0  # force primary display (0=primary on macOS)
on-all-workspaces=yes
ontop=yes
keepaspect=yes

# caching
cache-pause-initial=yes
cache-pause=yes
cache=yes
# RAM-only cache: make it effectively "infinite" by setting huge caps.
# Still bounded by available system memory and stream behavior.
demuxer-max-bytes=512GiB
demuxer-max-back-bytes=512GiB

# video output - fastest settings
vo=gpu-next
gpu-api=auto
hwdec=auto
fbo-format=rgb8
vd-lavc-dr=yes
opengl-swapinterval=1

# performance - maximum speed, minimal CPU/GPU
profile=fast
video-sync=audio
interpolation=no
correct-downscaling=no
demuxer-max-bytes=150MiB
linear-downscaling=no
sigmoid-upscaling=no
deband=no
dither-depth=no
temporal-dither=no
scaler-resizes-only=yes

# threading - auto-detect optimal thread count
# Lower thread counts to reduce decoder memory overhead.
vd-lavc-threads=2
ad-lavc-threads=1

hr-seek=no

# yt-dlp
ytdl-format="bestvideo[height<=1080]+bestaudio/best[height<=1080]"

# shader (no more for now)
# glsl-shader="~~/FSRCNNX_x2_8-0-4-1.glsl"
